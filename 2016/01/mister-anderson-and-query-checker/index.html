<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Проверка наличия сайта в выдаче Яндекса с помощью Query Checker</title>
    <meta name="author" content="Nicolas Chabanovsky"/>
    <link rel="stylesheet" href="/css/styles.css" type="text/css" media="screen, projection"/>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50848648-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body class="post_container">
    <div id="header">
        <a href="/">
            <div class="logo">
                Делая мир лучше
            </div>
        </a>
        <div class="meta_data">
            <div class="left">
                Николай Чабановский
            </div>
            <div class="right">
                Деревня Фамиана, остров Фукок, 01/14/16
            </div>
        </div>
        <div class="title">
            <h1>
                Проверка наличия сайта в выдаче Яндекса с помощью Query Checker
            </h1>
        </div>
        <div class="big_image">
            <img src="/assets/images/mister_anderson_and_query_checker_big.png"/>
        </div>
        <div class="excerpt">
                Как побороть первый редут поддержки Яндекса для случаев, когда поиск Яндекса отказывается индексировать ваш сайт.
        </div>
        <div class="divider">
            <img src="/assets/images/line-divider.png"/>
        </div>
    </div>
    <div id="content">
        <p>Уверен, многим приходилось сталкиваться с поддержкой Яндекса из-за ужасной работы их поиска. Для Stack Overflow «ужасными» стали индексация и ранжирование в выдаче. <a href="http://chabanovsky.com/2015/11/yandex-does-not-index-so/">Яндекс просто отказывается работать с любым сайтом сети Stack Exhcange</a>!</p>

<h2 id="section">Как происходит обращение в службу поддержки Яндекса</h2>

<ul>
  <li>Вы понимаете, что c сайтом что-то явно не так. Готовитесь, собираете обоснования и статистику. Находите форму обратной связи и пишите письмо в Яндекс.</li>
  <li>
    <p>В течение пары недель с вами связывается некий Платон Щукин с просьбой показать, по какому именно запросу ваш сайт не найти. Здорово, не правда ли?</p>

    <ul>
      <li>Если вы обычный разработчик, а не кулл-SEO-оптимизатор, вы вряд ли будете знать, по какому запросу вас нельзя найти. Переходов просто нет, и все. Как я понимаю, вопрос призван отсеять 99% всех написавших (то есть это вежливый посыл в известном направлении). К примеру, в среднем на Stack Overflow на английском на один вопрос в месяц приходят 0.8 пользователя, что при теоретическом равномерном распределении даст 8 000 000 (восемь миллионов) запросов. Физически невозможно проверить, «по какому запросу вашего сайта нет в выдаче». Яндекс как бы намекает: «давай, до свидания, у нас и без тебя все хорошо».</li>
      <li>По своей горе-наивности, я считал, что Платон Щукин – это реальный человек. Представьте, каково было мое разочарование, когда после нескольких месяцев я узнал, что это не так. С тех пор, я называю «их» Мистер Андерсон.</li>
    </ul>
  </li>
  <li>
    <p>Если же вы все-таки сделаете детальный анализ (как раз о нем пойдет речь дальше), вам ответят, что проблема не в поиске, а в том, что «ваш сайт просто неинтересен пользователям». Любые доводы со статистикой, что из поиска Google на сайт переходит в 10–15 раз больше посетителей, что среднее время пребывания на странице высоко и т. д. безразлично Мистеру Андерсону. Ваш сайт неинтересен пользователям поиска Яндекса.</p>
  </li>
  <li>Все. Конец истории. Яндексу и без вас хорошо. Доля рынка большая, деньги есть. <strong>Работает – не трогай!</strong></li>
</ul>

<h2 id="section-1">Как дойти до конца и понять, что мир несправедлив</h2>

<p>Мне кажется, для большинства обычных информационных ресурсов крайне сложно, а то и вовсе невозможно понять, по каким запросам сайт находят пользователи в поиске. Все же давайте попробуем это сделать.</p>

<p><strong>1. Статистика переходов из поиска Google</strong></p>

<p>Для Stack Overflow поиск Google работает в 10–15 раз лучше Яндекса (для контраста, напрямую на сайт попадает в полтора раза больше человек, чем из поиска Яндекса). Вы можете использовать топ-100 поисковых запросов, по которым вас находят в Google, и сделать аналитику на их основе.</p>

<p><strong>2. Прямое совпадение заголовка страницы</strong></p>

<p>Возьмите от 100 до 200 последних страницы, созданных на сайте, и проверьте, можно ли найти каждую из них на первых трех или пяти страницах поисковой выдачи, если в качестве запроса использовать заголовок страницы (title). Эти данные могут быть еще одним камнем в сторону Яндекса.</p>

<p><strong>3. Наличие страницы в поисковой базе</strong></p>

<p>Опять же возьмите от 100 до 200 последних страниц и проверьте, есть ли они вообще в поисковой базе Яндекса. Для этого используйте фильтр <code>url:mysite.ru/my_page</code>. Какой бы запрос не ввел пользователь, какой бы ни была интересной информация на сайте, вашу страницу никто не найдет, если ее не будет в поисковой базе.</p>

<p>Например, мне обидно и странно, что <a href="https://yandex.ru/search/?lr=2&amp;text=url%3Ahttp%3A%2F%2Fru.stackoverflow.com%2Fquestions%2F127221%2F">одни из наиболее посещаемых страниц Stack Overflow на русском</a> никогда не попадают не только в выдачу, но и в поисковую базу.</p>

<p><strong>4. Инструменты веб-мастера</strong></p>

<p>В принципе какую-то информацию можно вытащить из <a href="http://webmaster.yandex.ru/">инструментов для веб-мастеров от Яндекса</a>.</p>

<p>Например, где-то в конце декабря Stack Overflow на русском полностью пропал из поиска, вообще! Как вы думает, в чем была причина? Кто-то в тестовых целях сделал перенаправление со своего домена на <a href="http://ru.stackoverflow.com/">ru.stackoverflow.com</a>. Оказывается, поиск Яндекса и тут работает с дефектами. Он определил, что непонятно взявшийся откуда-то домен является главным зеркалом, и закрыл мне весь доступ к сайту в инструментах для веб-мастеров (да-да, я более не управлял сайтом, потому что кто-то изменил настройки зоны! Мне тоже не верилось!). Потом перенаправление взяли и убрали! Все, вашего сайта больше нет (а для некоторых и бизнеса, возможно, всей жизни!), он перестал быть интересным – и его выпилили. И это, конечно же, ваша вина, а не поиска Яндекса. У Яндекса все работает, все хорошо: рынок, деньги, ну, вы поняли…</p>

<h2 id="section-2">Анализировать 200 страниц по нескольким показателям – затратно</h2>

<p>Именно так я и подумал, и решил сделать жизнь чуть-чуть проще, как минимум себе. Я написал очень простое приложение, которое позволяет делать часть описанного выше. Исходный код приложения можно найти на GitHub по адресу: <a href="https://github.com/chabanovsky/querychecker">github.com/chabanovsky/querychecker</a>.</p>

<p>Приложение «заточено» под анализ Stack Overflow на русском, но изменить настройки, чтобы оно анализировало ваш сайт, займет минут 10, не более.</p>

<h3 id="section-3">Что же делает приложение?</h3>

<p><strong>Run SQ</strong>. Выполнить анализ поисковых запросов (Run Search Query Test). Данные для анализа берутся из файла <em>stats.json</em>, который находится в ресурсах проекта. Это файл содержит наиболее популярные запросы, по которым Stack Overflow на русском находят в поиске Google. Файл был загружен из Яндекс.Метрики (старый интерфейс). Изменений не вносилось. При необходимости просто замените на свой.</p>

<p><strong>Run NQ</strong>. Выполнить анализ новых страниц на сайте (Run New Questions Test). Программа заходит на список новых страниц и собирает заголовки последних заданных вопросов. Далее переходит в поиск Яндекса и проверяет, будьте внимательны, наличие любой страницы сайта в поисковой выдаче по заданному запросу. То есть проверка идет не по точному совпадению адреса, а по совпадению корневого домена. Для модификации программы под ваш сайт, пожалуйста, обратите внимание на файл <em>utils.h</em>. В нем есть JavaScript код, с помощью которого собираются заголовки.</p>

<p><strong>Run NQWA</strong>. Выполнить анализ новых вопросов, которые содержат ответы (Run New Questions With Answers Test). Идея, как и в <em>Run NQ</em>. Этот и следующий тест были добавлены после того, как Мистер Андерсон сказал, что <em>Run NQ</em> – нечестный анализ, и надо анализировать только вопросы, которые «могут быть интересны пользователям». В нашем случае, это вопросы, получившие ответы.</p>

<p><strong>Run NAQ</strong>. Выполнить анализ новых отвеченных вопросов (Run New Answered Questions Test). Отвеченные вопросы – это вопросы с ответами, которые были отмечены верными или имеют положительный рейтинг.</p>

<p><strong>Run NURLs</strong>. Выполнить анализ наличия новых вопросов в поисковой базе (Run New URLs Test). Программа собирает данные о последних вопросах и проверяет, есть ли они в поисковой базе Яндекса.</p>

<h3 id="section-4">Результаты</h3>

<p>Выполнение теста занимает 3–5 минут, в зависимости от скорости соединения. Результаты отображаются во всплывающем диалоговом окне. Я направлял результаты работы программы напрямую в службу поддержки Яндекса.</p>

<p>Буду рад, если кому-нибудь пригодится эта однодневная «лабораторная работа». Также буду рад доработать ее согласно отзывам. Да вы и сами можете ее доработать – исходный код доступен каждому!</p>

<p>Для Stack Overflow результаты плачевные – сайта нет в Яндексе, и, что хуже, пока что поддержка Яндекса дает явно понять, что он там и не появится. Рынок, деньги, ну, вы поняли… Работает – не трогай!</p>

<h2 id="section-5">В завершение немножко лирики</h2>

<p>Побывав на нескольких конференциях и видя, что происходит в Рунете со Stack Overflow, я ужасаюсь. Яндекс вкладывает огромные (как минимум, для меня) средства в создание сообщества разработчиков вокруг компании: проводят хакатоны, рассказывают про технологии, выступают спонсорами конференций, да и, наконец, кормят всех пиццей и печенками на различных встречах в своих офисах.</p>

<p><strong>Вопрос: зачем все это, если Яндекс не справляется со своей основной функцией?</strong></p>

<p>Зачем рассказывать, какие вы молодцы (ни в коей мере в этом не сомневаюсь, очень люблю и пользуюсь многими сервисами), и в то же время предоставлять наиотвратительнейший опыт использования главного продукта? Зачем вкладывать деньги в создание сообщества, если в момент, когда Яндекс действительно нужен, он физически не работает. Разработчики на работе ищут решение, а вместо нормального ответа на адекватном сайте в поисковой выдаче Яндекса только ссылки на информационные помойки. Фамильярность!</p>

<p>Банально, вот как я попаду на ваш хакатон, если использование поиска Яндекса сделает невозможным решение задачи в заданные сроки? «Используй Google», – ответит мне любой коллега. Ребята из Яндекса, эти два слова сводят на нет всю вашу работу по расположению к себе разработчиков. А, как мы знаем, отчасти мнения именно разработчиков являются главной составляющей успеха. Сегодня рекомендуют искать в Google, карты использовать от 2GIS. Будет ли доля на рынке завтра с таким подходом-то? Уверен, у вас есть план, но все же…</p>

<p>Может все-таки стоит задуматься об исправлении дефектов? Вот есть же реальные данные, можно не посылать на… и не говорить, что сайт плохой (для всего мира Stack Overflow – лучший сайт для поиска ответов, а вот для Яндекса он плохой), а взять и разобраться, попробовать исправить дефекты, сделать продукт лучше! Не сторонний сайт «интересней для пользователей», а ваш, ваш поиск, ваш продукт!</p>

<p>Не можете, некогда и т. д.? Скажите, как вам помочь! Уверен, я не один, кто хочет сделать жизнь русскоязычного разработчика легче и лучше. Мы вместе, всем сообществом, поможем исправить ваши дефекты!</p>


    </div>
    
    <div class="disqus media-padded">
        
<div class="comments">
    <div id="disqus_thread"></div>
    <script>
	    var disqus_shortname = 'chabanovsky',
	    	disqus_identifier = 'http://chabanovsky.com/2016/01/mister-anderson-and-query-checker/';
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
    <noscript>Пожалуйста, включите JavaScript для того <a href="http://disqus.com/?ref_noscript">чтобы видеть комментарии на Disqus.</a></noscript>
</div>

    </div>
    
    <div id="footer">
    </div>
</body>
</html>